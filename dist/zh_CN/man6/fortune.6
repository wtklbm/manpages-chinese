.\" -*- coding: UTF-8 -*-
'\" t
.\"     Title: FORTUNE
.\"    Author: [FIXME: author] [see http://www.docbook.org/tdg5/en/html/author]
.\" Generator: DocBook XSL Stylesheets vsnapshot <http://docbook.sf.net/>
.\"      Date: 19 April 94 [May. 97]
.\"    Manual: UNIX Reference Manual
.\"    Source: BSD Experimental
.\"  Language: English
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH FORTUNE 6 "19 April 94 [May\&. 97]" "BSD Experimental" "UNIX Reference Manual"
.ie  \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l

.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH NAME
fortune \- 打印一个随机的，希望有趣的格言

.SH SYNOPSIS
.HP \w'\fBfortune\fR\ 'u

  \fBfortune\fP     [\-acefilosw]
     [\-n\ \fIlength\fP]
     [\-m\ \fIpattern\fP]
     [[\fIn%\fP]\ \fIfile/dir/all\fP]

.SH DESCRIPTION
.PP
当 \fBfortune\fP 在没有参数的情况下运行时，它会打印出一个随机警句 \&。警句分为几类，每一类又细分为具有潜在攻击性的和不具有攻击性的 \&。

.SS Options
.PP
选项如下:

.PP
\fB\-a\fP
.RS 4

从所有格言列表中选择，既有冒犯性的，也有不 \& 的。(有关攻击性运势的更多信息，请参见 \fB\-o\fP 选项。)

.RE
.PP
\fB\-c\fP
.RS 4

显示幸运来自的 cookie 文件 \&。

.RE
.PP
\fB\-e\fP
.RS 4

考虑所有的财富文件大小相同 (参见下面关于多个文件的讨论) \&。

.RE
.PP
\fB\-f\fP
.RS 4

打印出要搜索的文件列表，但不要 \*(Aqt 打印出一笔财富 \&。

.RE
.PP
\fB\-l\fP
.RS 4

仅限长格言 \&。请参见 \fB\-n\fP，了解 \(lqlong\(rq 在这个意义上是如何定义的 \&。

.RE
.PP
\fB\-m \fP\fIpattern\fP
.RS 4

打印出所有符合基本正则表达式 \fIpattern\fP\& 的运势。这些表达式的语法取决于您的系统如何定义 \fBre_comp\fP(3) 或
\fBregcomp\fP(3)，但它应该与 \fBgrep\fP(1)\& 中使用的语法相似。

命运被输出到标准输出，而每个命运来自的文件的名称被打印到标准错误 \&。可以重定向其中一个或两个;
如果标准输出被重定向到一个文件，结果是一个有效的财富数据库文件 \&。如果标准错误是 \fIalso\fP 重定向到这个文件，结果是 \fIstill valid\fP, \fBbut there will be \(lqbogus\(rq\fP \fBfortunes\fP, i\&.e\&。文件名本身，在括号 \&
中。如果您希望从原始文件中删除收集到的匹配项，这会很有用，因为每个文件名记录都将在它命名的文件中的记录之前 \&。

.RE
.PP
\fB\-n \fP\fIlength\fP
.RS 4

设置被认为是 \(lqshort\(rq (默认为 160)\& 的最长算命长度 (以字符为单位)。所有比这更长的算命都被认为是
\(lqlong\(rq\&。当心! 如果您把长度设置得太短而要求短的财富，或者太长而要求长的，财富就会进入一个永无止境的循环 \&。

.RE

.PP
\fB\-o\fP 仅从可能令人反感的格言中选择 \&。如果指定了一个 fortune 目录 \&，则忽略 \-o 选项。
.RS 4

\fBPlease, please, please request a potentially\fP \fBoffensive fortune if and only if\fP \fByou believe, deep in your heart,\fP \fBthat you are willing to be\fP
\fBoffended\&. (And that you\*(Aqll just quit\fP \fBusing\fP \-o \fBrather\fP \fBthan give us grief about it,\fP \fBokay?)\fP

\&.\&.\&. 让我们牢记兄弟会的基本管理理念，用这些话来概括: 我们相信健康、发自内心的笑声 \-\- 如果需要的话，以牺牲全人类为代价
\&。需要\&.

\- H\&。艾伦史密斯，"Rude Jokes"

.RE

.PP
\fB\-s\fP
.RS 4

只有简短的格言 \&。请参见 \fB\-n\fP 上的运势被认为是 \(lqshort\(rq\&。

.RE
.PP
\fB\-i\fP
.RS 4

忽略 \fB\-m\fP 模式 \& 的大小写。

.RE
.PP
\fB\-w\fP
.RS 4

在终止之前等待根据消息中的字符数 \& 计算的时间量。如果它作为注销过程的一部分执行以保证在清除屏幕之前可以读取消息 \&，这将很有用。

.RE

.PP
用户可以指定替代说法 \&。您可以指定一个特定的文件，一个包含一个或多个文件的目录，或者表示使用所有标准数据库 \& 的特殊词
\fIall\fP。这些中的任何一个前面都可以有一个百分比，这是一个介于 0 和 100 之间的数字 \fIn\fP，包括 0 和 100，后跟一个
\fI%\fP\&。如果是，则从该文件或目录中选取格言的概率为 \fIn\fP%。如果百分比之和不等于
100，并且存在没有百分比的规范，则剩余的百分比将应用于那些文件或者目录，在这种情况下，从其中一个中选择的概率将基于它们的相对大小 \&。

.PP
例如，给定两个数据库 \fIfunny\fP 和 \fInot\-funny\fP，其中 \fIfunny\fP 是两倍大 (在财富数量上，而不是原始文件大小)，说

.PP
\fBfortune\fP \fIfunny not\-funny\fP

.PP
三分之二的时间会让您从 \fIfunny\fP 中获得财富 \&。命令

.PP
\fBfortune\fP 90% \fIfunny\fP 10% \fInot\-funny\fP

.PP
将从 \fIfunny\fP 中挑选出 90% 的财富 (\(lq10% not\-funny\(rq 是不必要的，因为 10% 就是全部了 \*(Aqs
left)\&。

.PP
\fB\-e\fP 选项表示将所有文件视为平等; thus

.PP
\fBfortune \-e\fP \fIfunny not\-funny\fP

.PP
相当于

.PP
\fBfortune\fP 50% \fIfunny\fP 50% \fInot\-funny\fP

.PP
本运还支持 BSD 方法，在数据库名后加 \(lq\-o\(rq，指定冒犯运 \&。然而，这是 \fBnot\fP fortune 存储它们的方式: 攻击性
fortune 存储在一个单独的目录中，没有 \(lq\-o\(rq infix\&. 以 \(lq\-o\(rq 结尾的纯名称
(i\&.e\&.，而不是文件或目录的路径) 将被假定为攻击性数据库，并将其后缀剥离和在攻击性目录中搜索 (即使 \fB\-a\fP 或 \fB\-o\fP
选项均未指定) \&。此特性不仅用于向后兼容，还允许用户区分同名的非攻击性和攻击性数据库 \&.

.PP
例如，假设在无害的和潜在的攻击性集合中都有一个名为 \fIdefinitions\fP 的数据库，那么以下命令将在 90%
的时间内选择一个无害的定义，并为剩余的 10% 选择一个潜在的攻击性定义:

.PP
\fBfortune\fP 90% \fIdefinitions definitions\-o\fP

.SH FILES
.PP
Note: 这些是编译时定义的默认值 \&。

.PP
\fI/usr/share/fortune\fP 无害财富目录 \&。

.PP
\fI/usr/share/fortune/off\fP 进攻财运目录 \&.

.PP
如果特别不想要一组特定的命运，有一个简单的解决方案: 删除关联的 \fB\&.dat\fP 文件 \&。如果稍后需要该文件，这会保持数据完好无损，但由于
\fBfortune\fP 不再找到指针文件，它会忽略文本文件 \&。

.SH BUGS
.PP
按目录划分攻击性和非攻击性的运势，而不是通过 `\-o\*(Aq 文件中缀，不是 100% 兼容原 BSD 运势 \&。虽然`\-o\*(Aq
中缀是识别为引用攻击性数据库，攻击性数据库文件仍需要位于单独的目录中 \&。当然，解决方法是将 `\-o\*(Aq 文件移动到攻击性目录中
(重命名或不重命名)，并使用 \fB\-a\fP 选项 \&。

.PP
提供的财富数据库遭到攻击，以纠正拼写和语法错误，特别是减少冗余和重复以及冗余 \&。但特别要避免重复 \&。这还没有完全成功
\&。在此过程中，也可能失去了一些财富。

.PP
财富数据库现在被分成大量的小文件，一些按格式 (诗歌、定义) 组织，一些按内容 (宗教、政治) \&。主目录和攻击文件目录
(e\&.g\&.、fortunes/definitions 和 fortunes/off/definitions) \&
下有并行文件。并非所有的潜在攻击性财富都在攻击性财富文件中，也不是所有攻击性文件中的潜在攻击性财富可能具有攻击性，尽管已经进行了强烈的尝试以实现更大的一致性
\&。此外，可能会进行更好的划分 \&。

.SH HISTORY
.PP
此版本的 fortune 是基于 NetBSD fortune 1\&.4 的，但有一些错误修复和增强 \&。

.PP
原始的 fortune/strfile 格式使用单个文件; strfile 读取文本文件并将其转换为以 null 分隔的字符串，这些字符串存储在
\&.dat 文件 \& 中的指针表之后。到 NetBSD fortune 1\&.4 时，这已更改为两个单独的文件: \&.dat 文件只是标题
(指针表，加上标志; 参见 \fIstrfile\&.h\fP)，文本字符串留在它们自己的文件中
\&。这样做的潜在问题是文本文件和头文件可能会不同步，但优点是文本文件可以很容易地编辑而无需求助于 unstr，并且有可能节省磁盘空间
(假设系统管理员保留了包含字符串的 \&.dat 文件和文本文件)\&。

.PP
对 NetBSD 版本所做的许多增强都假定 Linux 系统，因此导致它在其他平台 (包括 BSD\&) 下失败。源代码已经变得更泛型，目前可以在
SunOS 4\&.x 和 Linux 上运行，预计在 future\& 中支持更多平台。请注意，在此过程中无意中发现并修复了一些错误 \&。

.PP
据推测，很多人都参与过这个程序，许多人没有留下署名 \&。

.SH "SEE ALSO"
.PP
\fBre_comp\fP(3), \fBregcomp\fP(3), \fBstrfile\fP(1), \fBunstr\fP(1)

.PP
.SH [手册页中文版]
.PP
本翻译为免费文档；阅读
.UR https://www.gnu.org/licenses/gpl-3.0.html
GNU 通用公共许可证第 3 版
.UE
或稍后的版权条款。因使用该翻译而造成的任何问题和损失完全由您承担。
.PP
该中文翻译由 wtklbm
.B <wtklbm@gmail.com>
根据个人学习需要制作。
.PP
项目地址:
.UR \fBhttps://github.com/wtklbm/manpages-chinese\fR
.ME 。
