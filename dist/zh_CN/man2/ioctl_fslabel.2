.\" -*- coding: UTF-8 -*-
.\" Copyright (c) 2018, Red Hat, Inc.  All rights reserved.
.\"
.\" SPDX-License-Identifier: GPL-2.0-or-later
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH ioctl_fslabel 2 2023\-02\-05 "Linux man\-pages 6.03" 
.SH NAME
ioctl_fslabel \- 获取或设置文件系统标签
.SH LIBRARY
标准 C 库 (\fIlibc\fP、\fI\-lc\fP)
.SH SYNOPSIS
.nf
\fB#include <linux/fs.h>\fP       /* Definition of \fB*FSLABEL*\fP constants */
\fB#include <sys/ioctl.h>\fP
.PP
\fBint ioctl(int \fP\fIfd\fP\fB, FS_IOC_GETFSLABEL, char \fP\fIlabel\fP\fB[FSLABEL_MAX]);\fP
\fBint ioctl(int \fP\fIfd\fP\fB, FS_IOC_SETFSLABEL, char \fP\fIlabel\fP\fB[FSLABEL_MAX]);\fP
.fi
.SH DESCRIPTION
如果文件系统支持在线标签操作，这些 \fBioctl\fP(2) 操作可用于获取或设置 \fIfd\fP 所在文件系统的文件系统标签。
\fBFS_IOC_SETFSLABEL\fP 操作需要权限 (\fBCAP_SYS_ADMIN\fP)。
.SH "RETURN VALUE"
成功返回零。 出错时返回 \-1，并设置 \fIerrno\fP 以指示错误。
.SH ERRORS
可能的错误包括 (但不限于) 以下内容:
.TP 
\fBEFAULT\fP
\fIlabel\fP 引用不可访问的内存区域。
.TP 
\fBEINVAL\fP
指定的标签超过文件系统的最大标签长度。
.TP 
\fBENOTTY\fP
如果文件系统不支持在线标签操作，就会出现这种情况。
.TP 
\fBEPERM\fP
调用进程没有足够的权限来设置标签。
.SH VERSIONS
这些 \fBioctl\fP(2) 操作最早出现在 Linux 4.18 中。 它们以前被称为 \fBBTRFS_IOC_GET_FSLABEL\fP 和
\fBBTRFS_IOC_SET_FSLABEL\fP，并且是 Btrfs 私有的。
.SH STANDARDS
这个 API 是特定于 Linux 的。
.SH NOTES
此接口的最大字符串长度为 \fBFSLABEL_MAX\fP，包括终止空字节 (\[aq]\e0\[aq])。
文件系统具有不同的最大标签长度，可能包括也可能不包括终止空值。 提供给 \fBFS_IOC_SETFSLABEL\fP 的字符串必须始终以空值终止，而
\fBFS_IOC_GETFSLABEL\fP 返回的字符串将始终以空值终止。
.SH "SEE ALSO"
\fBioctl\fP(2), \fBblkid\fP(8)
.PP
.SH [手册页中文版]
.PP
本翻译为免费文档；阅读
.UR https://www.gnu.org/licenses/gpl-3.0.html
GNU 通用公共许可证第 3 版
.UE
或稍后的版权条款。因使用该翻译而造成的任何问题和损失完全由您承担。
.PP
该中文翻译由 wtklbm
.B <wtklbm@gmail.com>
根据个人学习需要制作。
.PP
项目地址:
.UR \fBhttps://github.com/wtklbm/manpages-chinese\fR
.ME 。
