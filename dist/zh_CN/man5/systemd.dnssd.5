.\" -*- coding: UTF-8 -*-
'\" t
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH SYSTEMD\&.DNSSD 5 "" "systemd 253" systemd.dnssd
.ie  \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH NAME
systemd.dnssd\-DNS\-SD 配置
.SH SYNOPSIS
.PP
\fInetwork_service\fP\&.dnssd
.SH DESCRIPTION
.PP
DNS\-SD 设置由 \fBsystemd\-resolved\fP(8)\& 执行。
.PP
主网络服务文件的扩展名必须是 \&.dnssd; 其他扩展被忽略 \&。
.PP
\&.dnssd 文件是从位于系统网络目录 /usr/lib/systemd/dnssd 和
/usr/local/lib/systemd/dnssd、易失性运行时网络目录 /run/systemd/dnssd 和本地管理网络目录
/etc/dnssd\& 中的文件读取的。所有配置文件都按词法顺序进行集体排序和处理，而不管它们所在的目录 \&。但是，具有相同文件名的文件会相互替换
\&。/etc/ 中的文件具有最高优先级，/run/ 中的文件优先于 /usr/lib/\&
中的同名文件。如果需要，这可用于使用本地文件覆盖系统提供的配置文件 \&。
.PP
与网络服务文件 foo\&.dnssd 一起，"drop\-in" 目录 foo\&.dnssd\&.d/ 可能存在 \&。该目录中所有后缀为
"\&.conf" 的文件将在文件本身被解析后被解析 \&。这对于更改或添加配置设置很有用，而无需修改主配置文件 \&。每个丢弃 \- in
文件必须有适当的节标题 \&。
.PP
除了 /etc/systemd/dnssd，丢弃 \- in "\&.d" 目录可以放在 /usr/lib/systemd/dnssd 或
/run/systemd/dnssd 目录下 \&。/etc/ 中的插入文件优先于 /run / 中的文件，而 /run / 中的文件又优先于
/usr/lib/ 或 /usr/lib\& 中的文件。任何这些目录下的插入文件都优先于位于任何地方的主要网络服务文件 \&。
.SH "[SERVICE] SECTION OPTIONS"
.PP
网络服务文件包含一个 [Service] 部分，它指定在具有多播 DNS 广播的本地网络中宣布的可发现网络服务 \&。
.PP
\fIName=\fP
.RS 4
\m[blue]\fBRFC 6763\fP\m[]\&\s-2\u[1]\d\s+2 的 4\&.1\&.1
部分中定义的网络服务的实例名称，e\&.g\&。 "webserver"\&.
.sp
该选项支持简单说明符扩展 \&。理解以下扩展:
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
\fBTable\ \&1.\ \&Specifiers available\fP
.TS
allbox tab(:);
lB lB lB.
T{
Specifier
T}:T{
Meaning
T}:T{
Details
T}
.T&
l l l
l l l
l l l
l l l
l l l
l l l
l l l
l l l
l l l
l l l
l l l
l l l.
T{
"%a"
T}:T{
Architecture
T}:T{
A short string identifying the architecture of the local system\&. A string such as \fBx86\fP, \fBx86\-64\fP or \fBarm64\fP\&. See the architectures defined for \fIConditionArchitecture=\fP in \fBsystemd.unit\fP(5) for a full list\&.
T}
T{
"%A"
T}:T{
Operating system image version
T}:T{
The operating system image version identifier of the running system, as read from the \fIIMAGE_VERSION=\fP field of /etc/os\-release\&. If not set, resolves to an empty string\&. See \fBos\-release\fP(5) for more information\&.
T}
T{
"%b"
T}:T{
Boot ID
T}:T{
The boot ID of the running system, formatted as string\&. See \fBrandom\fP(4) for more information\&.
T}
T{
"%B"
T}:T{
Operating system build ID
T}:T{
The operating system build identifier of the running system, as read from the \fIBUILD_ID=\fP field of /etc/os\-release\&. If not set, resolves to an empty string\&. See \fBos\-release\fP(5) for more information\&.
T}
T{
"%H"
T}:T{
Host name
T}:T{
The hostname of the running system\&.
T}
T{
"%m"
T}:T{
Machine ID
T}:T{
The machine ID of the running system, formatted as string\&. See \fBmachine\-id\fP(5) for more information\&.
T}
T{
"%M"
T}:T{
Operating system image identifier
T}:T{
The operating system image identifier of the running system, as read from the \fIIMAGE_ID=\fP field of /etc/os\-release\&. If not set, resolves to an empty string\&. See \fBos\-release\fP(5) for more information\&.
T}
T{
"%o"
T}:T{
Operating system ID
T}:T{
The operating system identifier of the running system, as read from the \fIID=\fP field of /etc/os\-release\&. See \fBos\-release\fP(5) for more information\&.
T}
T{
"%v"
T}:T{
Kernel release
T}:T{
Identical to \fBuname \-r\fP output\&.
T}
T{
"%w"
T}:T{
Operating system version ID
T}:T{
The operating system version identifier of the running system, as read from the \fIVERSION_ID=\fP field of /etc/os\-release\&. If not set, resolves to an empty string\&. See \fBos\-release\fP(5) for more information\&.
T}
T{
"%W"
T}:T{
Operating system variant ID
T}:T{
The operating system variant identifier of the running system, as read from the \fIVARIANT_ID=\fP field of /etc/os\-release\&. If not set, resolves to an empty string\&. See \fBos\-release\fP(5) for more information\&.
T}
T{
"%%"
T}:T{
Single percent sign
T}:T{
Use "%%" in place of "%" to specify a single percent sign\&.
T}
.TE
.sp 1
.RE
.PP
\fIType=\fP
.RS 4
\m[blue]\fBRFC 6763\fP\m[]\&\s-2\u[1]\d\s+2 的 4\&.1\&.2 节中定义的一种网络服务，e\&.g\&。
"_http\&._tcp"\&.
.RE
.PP
\fIPort=\fP
.RS 4
网络服务的 IP 端口号 \&。
.RE
.PP
\fIPriority=\fP
.RS 4
网络服务对应的 \fBSRV\fP 资源记录中设置的优先级数 \&。
.RE
.PP
\fIWeight=\fP
.RS 4
网络服务对应的 \fBSRV\fP 资源记录中设置的权重数 \&。
.RE
.PP
\fITxtText=\fP
.RS 4
以空格分隔的任意 key/value 对列表，在相应的 TXT 资源记录 e\&.g\& 中传达有关指定服务的附加信息。
"path=/portal/index\&.html"\&. 键和值可以包含 C 风格的转义序列，这些序列在读取配置文件时得到转换 \&。
.sp
可以多次指定此选项和 \fITxtData=\fP，在这种情况下将为服务创建多个 TXT 资源记录
\&。如果将空字符串分配给此选项，则会重置列表并且所有先前的分配都将无效 \&。
.RE
.PP
\fITxtData=\fP
.RS 4
以空格分隔的任意 key/value 对列表，在相应的 TXT 资源记录中传达有关指定服务的附加信息，其中值是代表任何二进制数据的 base64
编码字符串，e\&.g\&。 `数据 = YW55IGJpbmFyeSBkYXRhCg ==`\&。密钥可以包含 C
风格的转义序列，这些序列在读取配置文件时得到转换 \&。
.sp
可以多次指定此选项和 \fITxtText=\fP，在这种情况下将为服务创建多个 TXT 资源记录
\&。如果将空字符串分配给此选项，则会重置列表并且所有先前的分配都将无效 \&。
.RE
.SH EXAMPLES
.PP
\fBExample\ \&1.\ \&HTTP service\fP
.sp
.if  n \{\
.RS 4
.\}
.nf
# /etc/systemd/dnssd/http\&.dnssd
[Service]
Name=%H
Type=_http\&._tcp
Port=80
TxtText=path=/stats/index\&.html t=temperature_sensor
.fi
.if  n \{\
.RE
.\}
.PP
如果在网络接口上启用了 MulticastDNS，这使得运行在主机上的 http 服务器在本地网络中可被发现。
.PP
现在实用程序 "resolvectl" 应该能够将服务解析到主机 \* (Aqs 名称:
.sp
.if  n \{\
.RS 4
.\}
.nf
$ resolvectl service meteo\&._http\&._tcp\&.local
meteo\&._http\&._tcp\&.local: meteo\&.local:80 [priority=0, weight=0]
                        169\&.254\&.208\&.106%senp0s21f0u2u4
                        fe80::213:3bff:fe49:8aa%senp0s21f0u2u4
                        path=/stats/index\&.html
                        t=temperature_sensor
                        (meteo/_http\&._tcp/local)

\-\- 通过 mDNS/IPv6 协议在 4\&.0ms\& 内获取信息。
\-\- 数据已认证: 是
.fi
.if  n \{\
.RE
.\}
.PP
在同一本地网络中的不同主机上运行的 "Avahi" 也应该看到该服务:
.sp
.if  n \{\
.RS 4
.\}
.nf
$ avahi\-browse \-a \-r
+ enp3s0 IPv6 meteo                                         Web Site             local
+ enp3s0 IPv4 meteo                                         Web Site             local
= enp3s0 IPv6 meteo                                         Web Site             local
   hostname = [meteo\&.local] 
   address = [fe80::213:3bff:fe49:8aa]
   port = [80] 
   txt = ["path=/stats/index\&.html" "t=temperature_sensor"]
= enp3s0 IPv4 meteo                                         Web Site             local
   hostname = [meteo\&.local]
   address = [169\&.254\&.208\&.106]
   port = [80]
   txt = ["path=/stats/index\&.html" "t=temperature_sensor"]
.fi
.if  n \{\
.RE
.\}
.SH "SEE ALSO"
.PP
\fBsystemd\fP(1), \fBsystemd\-resolved.service\fP(8), \fBresolvectl\fP(1)
.SH NOTES
.IP " 1." 4
RFC 6763
.RS 4
\%https://tools.ietf.org/html/rfc6763
.RE
.PP
.SH [手册页中文版]
.PP
本翻译为免费文档；阅读
.UR https://www.gnu.org/licenses/gpl-3.0.html
GNU 通用公共许可证第 3 版
.UE
或稍后的版权条款。因使用该翻译而造成的任何问题和损失完全由您承担。
.PP
该中文翻译由 wtklbm
.B <wtklbm@gmail.com>
根据个人学习需要制作。
.PP
项目地址:
.UR \fBhttps://github.com/wtklbm/manpages-chinese\fR
.ME 。
