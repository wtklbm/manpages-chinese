.\" -*- coding: UTF-8 -*-
'\" t
.\" Copyright (C) 2001 Andries Brouwer <aeb@cwi.nl>.
.\"
.\" SPDX-License-Identifier: Linux-man-pages-copyleft
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH stdio_ext 3 2023\-01\-07 "Linux man\-pages 6.03" 
.SH NAME
__fbufsize, __flbf, __fpending, __fpurge, __freadable, __freading,
__fsetlocking, __fwritable, __fwriting, _flushlbf \- 标准输入输出文件结构体的接口
.SH LIBRARY
标准 C 库 (\fIlibc\fP、\fI\-lc\fP)
.SH SYNOPSIS
.nf
\fB#include <stdio.h>\fP
\fB#include <stdio_ext.h>\fP
.PP
\fBsize_t __fbufsize(FILE *\fP\fIstream\fP\fB);\fP
\fBsize_t __fpending(FILE *\fP\fIstream\fP\fB);\fP
\fBint __flbf(FILE *\fP\fIstream\fP\fB);\fP
\fBint __freadable(FILE *\fP\fIstream\fP\fB);\fP
\fBint __fwritable(FILE *\fP\fIstream\fP\fB);\fP
\fBint __freading(FILE *\fP\fIstream\fP\fB);\fP
\fBint __fwriting(FILE *\fP\fIstream\fP\fB);\fP
\fBint __fsetlocking(FILE *\fP\fIstream\fP\fB, int \fP\fItype\fP\fB);\fP
\fBint __fsetlocking(FILE *\fP\fIstream\fP\fB, int \fP\fItype\fP\fB);\fP
\fBvoid __fpurge(FILE *\fP\fIstream\fP\fB);\fP
.fi
.SH DESCRIPTION
Solaris 引入了例程以允许对 \fIFILE\fP 结构体的内部进行可移植访问，glibc 也实现了这些。
.PP
\fB__fbufsize\fP() 函数返回给定流当前使用的缓冲区的大小。
.PP
\fB__fpending\fP() 函数返回输出缓冲区中的字节数。 对于面向宽的流，元是宽字符。 此函数在读取模式的缓冲区上未定义，或以只读方式打开。
.PP
如果流是行缓冲的，则 \fB__flbf\fP() 函数返回非零值，否则返回零。
.PP
如果流允许读取，则 \fB__freadable\fP() 函数返回非零值，否则返回零。
.PP
如果流允许写入，则 \fB__fwritable\fP() 函数返回非零值，否则返回零。
.PP
如果流是只读的，或者流上的最后一个操作是读取操作，则 \fB__freading\fP() 函数返回非零值，否则返回零。
.PP
如果流是只写的 (或仅追加的)，或者流上的最后一个操作是写操作，则 \fB__fwriting\fP() 函数返回非零值，否则返回零。
.PP
\fB__fsetlocking\fP() 函数可用于选择所需的流锁定类型。 它返回当前类型。 \fItype\fP 参数可以取以下三个值:
.TP 
\fBFSETLOCKING_INTERNAL\fP
围绕给定流上的每个操作执行隐式锁定 (*_unlocked 除外)。 这是默认设置。
.TP 
\fBFSETLOCKING_BYCALLER\fP
调用者将负责锁定 (如果有多个线程，则可能使用 \fBflockfile\fP(3))，并且标准输入输出例程将不会执行锁定，直到状态重置为
\fBFSETLOCKING_INTERNAL\fP。
.TP 
\fBFSETLOCKING_QUERY\fP
不要更改锁定类型。 (只返回它。)
.PP
\fB_flushlbf\fP() 函数刷新所有行缓冲流。 (大概是为了强制输出到最终端，比如在读取键盘输入之前。)
.PP
\fB__fpurge\fP() 函数丢弃流缓冲区的内容。
.SH ATTRIBUTES
有关本节中使用的术语的解释，请参见 \fBattributes\fP(7)。
.ad l
.nh
.TS
allbox;
lbx lb lb
l l l.
Interface	Attribute	Value
T{
\fB__fbufsize\fP(),
\fB__fpending\fP(),
\fB__fpurge\fP(),
\fB__fsetlocking\fP()
T}	Thread safety	MT\-Safe race:stream
T{
\fB__flbf\fP(),
\fB__freadable\fP(),
\fB__freading\fP(),
\fB__fwritable\fP(),
\fB__fwriting\fP(),
\fB_flushlbf\fP()
T}	Thread safety	MT\-Safe
.TE
.hy
.ad
.sp 1
.SH "SEE ALSO"
\fBflockfile\fP(3), \fBfpurge\fP(3)
.PP
.SH [手册页中文版]
.PP
本翻译为免费文档；阅读
.UR https://www.gnu.org/licenses/gpl-3.0.html
GNU 通用公共许可证第 3 版
.UE
或稍后的版权条款。因使用该翻译而造成的任何问题和损失完全由您承担。
.PP
该中文翻译由 wtklbm
.B <wtklbm@gmail.com>
根据个人学习需要制作。
.PP
项目地址:
.UR \fBhttps://github.com/wtklbm/manpages-chinese\fR
.ME 。
