.\" -*- coding: UTF-8 -*-
'\" t
.\"     Title: dmesg
.\"    Author: [see the "AUTHOR(S)" section]
.\" Generator: Asciidoctor 2.0.15
.\"      Date: 2022-05-11
.\"    Manual: User Commands
.\"    Source: util-linux 2.38.1
.\"  Language: English
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH DMESG 1 2022\-05\-11 "util\-linux 2.38.1" "User Commands"
.ie  \n(.g .ds Aq \(aq
.el       .ds Aq '
.ss \n[.ss] 0
.nh
.ad l
.de  URL
\fI\\$2\fP <\\$1>\\$3
..
.als MTO URL
.if  \n[.g] \{\
.  mso www.tmac
.  am URL
.    ad l
.  .
.  am MTO
.    ad l
.  .
.  LINKSTYLE blue R < >
.\}
.SH NAME
dmesg \- 打印或控制内核环形缓冲区
.SH SYNOPSIS
.sp
\fBdmesg\fP [options]
.sp
\fBdmesg\fP \fB\-\-clear\fP
.sp
\fBdmesg\fP \fB\-\-read\-clear\fP [options]
.sp
\fBdmesg\fP \fB\-\-console\-level\fP \fIlevel\fP
.sp
\fBdmesg\fP \fB\-\-console\-on\fP
.sp
\fBdmesg\fP \fB\-\-console\-off\fP
.SH DESCRIPTION
.sp
\fBdmesg\fP 用于检查或控制内核环形缓冲区。
.sp
默认操作是显示来自内核环形缓冲区的所有消息。
.SH OPTIONS
.sp
\fB\-\-clear\fP、\fB\-\-read\-clear\fP、\fB\-\-console\-on\fP、\fB\-\-console\-off\fP 和
\fB\-\-console\-level\fP 选项相互排斥。
.sp
\fB\-C\fP, \fB\-\-clear\fP
.RS 4
清除环形缓冲区。
.RE
.sp
\fB\-c\fP, \fB\-\-read\-clear\fP
.RS 4
在第一次打印其内容后清除环形缓冲区。
.RE
.sp
\fB\-D\fP, \fB\-\-console\-off\fP
.RS 4
禁止将消息打印到控制台。
.RE
.sp
\fB\-d\fP, \fB\-\-show\-delta\fP
.RS 4
显示时间戳和消息之间花费的时间增量。如果与 \fB\-\-notime\fP 一起使用，则仅打印不带时间戳的时间增量。
.RE
.sp
\fB\-E\fP, \fB\-\-console\-on\fP
.RS 4
启用打印消息到控制台。
.RE
.sp
\fB\-e\fP, \fB\-\-reltime\fP
.RS 4
以人类可读的格式显示本地时间和增量。请注意，转换为本地时间可能不准确 (有关详细信息，请参见 \fB\-T\fP)。
.RE
.sp
\fB\-F\fP, \fB\-\-file\fP \fIfile\fP
.RS 4
从给定的 \fIfile\fP 读取系统日志消息。请注意，\fB\-F\fP 不支持 kmsg 格式的消息。仅支持旧的系统日志格式。
.RE
.sp
\fB\-f\fP, \fB\-\-facility\fP \fIlist\fP
.RS 4
将输出限制到设施的给定 (comma\-separated) \fIlist\fP。例如:
.sp
\fBdmesg \-\-facility=daemon\fP
.sp
将仅打印来自系统守护进程的消息。对于所有支持的设施，请参见 \fB\-\-help\fP 输出。
.RE
.sp
\fB\-H\fP, \fB\-\-human\fP
.RS 4
启用人类可读的输出。另请详见 \fB\-\-color\fP、\fB\-\-reltime\fP 和 \fB\-\-nopager\fP。
.RE
.sp
\fB\-J\fP, \fB\-\-json\fP
.RS 4
使用 JSON 输出格式。时间输出格式只有 "sec.usec" 格式，日志优先级默认不解码 (使用 \fB\-\-decode\fP 拆分为 facility
和 priority)，其他控制输出格式或时间格式的选项被静默忽略。
.RE
.sp
\fB\-k\fP, \fB\-\-kernel\fP
.RS 4
打印内核消息。
.RE
.sp
\fB\-L\fP, \fB\-\-color\fP[=\fIwhen\fP]
.RS 4
对输出进行着色。可选参数 \fIwhen\fP 可以是 \fBauto\fP、\fBnever\fP 或 \fBalways\fP。如果省略 \fIwhen\fP 参数，则默认为
\fBauto\fP。可以禁用颜色; 对于当前的内置默认值，请参见 \fB\-\-help\fP 输出。另请参见下面的 \fBCOLORS\fP 部分。
.RE
.sp
\fB\-l\fP, \fB\-\-level\fP \fIlist\fP
.RS 4
将输出限制为给定的 (comma\-separated) \fIlist\fP 级别。例如:
.sp
\fBdmesg \-\-level=err,warn\fP
.sp
将仅打印错误和警告消息。对于所有支持的级别，请参见 \fB\-\-help\fP 输出。
.RE
.sp
\fB\-n\fP, \fB\-\-console\-level\fP \fIlevel\fP
.RS 4
将完成消息打印的 \fIlevel\fP 设置到控制台。\fIlevel\fP 是级别编号或级别名称的缩写。对于所有支持的级别，请参见 \fB\-\-help\fP 输出。
.sp
例如，\fB\-n 1\fP 或 \fB\-n emerg\fP 阻止所有消息 (紧急 (panic) 消息除外) 出现在控制台上。所有级别的消息仍然写入
\fI/proc/kmsg\fP，因此 \fBsyslogd\fP(8) 仍可用于准确控制内核消息出现的位置。当使用 \fB\-n\fP 选项时，\fBdmesg\fP 将
\fInot\fP 打印或清除内核环缓冲区。
.RE
.sp
\fB\-\-noescape\fP
.RS 4
出于安全原因，不可打印和可能不安全的字符 (例如，损坏的多字节序列、终端控制字符等) 默认以 \(rsx<hex>
格式转义。此选项完全禁用此，特性。它 \(cqs 可用于例如与 \fB\-\-raw\fP 一起用于调试目的。小心不要 \(cqt 默认使用它。
.RE
.sp
\fB\-P\fP, \fB\-\-nopager\fP
.RS 4
不要将输出通过管道传输到寻呼机。\fB\-\-human\fP 输出默认启用寻呼机。
.RE
.sp
\fB\-p\fP, \fB\-\-force\-prefix\fP
.RS 4
将设施、级别或时间戳信息添加到多行消息的每一行。
.RE
.sp
\fB\-r\fP, \fB\-\-raw\fP
.RS 4
打印原始消息缓冲区，即不去除日志级别的前缀，但所有不可打印的字符仍然被转义 (另请参见 \fB\-\-noescape\fP).
.sp
请注意，真正的原始格式取决于 \fBdmesg\fP 读取内核消息的方法。\fI/dev/kmsg\fP 设备使用与 \fBsyslog\fP(2)
不同的格式。为了向后兼容，\fBdmesg\fP 始终以 \fBsyslog\fP(2) 格式返回数据。例如，可以通过命令 \(aqdd if=/dev/kmsg
iflag=nonblock\(aq.
.RE
.sp
\fB\-S\fP, \fB\-\-syslog\fP
.RS 4
强制 \fBdmesg\fP 使用 \fBsyslog\fP(2) 内核接口读取内核消息。自内核 3.5.0 以来，默认使用 \fI/dev/kmsg\fP 而不是
\fBsyslog\fP(2)。
.RE
.sp
\fB\-s\fP, \fB\-\-buffer\-size\fP \fIsize\fP
.RS 4
使用 \fIsize\fP 缓冲区查询内核环缓冲区。默认为 16392。(默认内核 syslog 缓冲区大小最初为 4096，从 1.3.54 开始为
8192，从 2.1.113 开始为 16384。) 如果您将内核缓冲区设置为大于默认值，则可以使用此选项查看整个缓冲区。
.RE
.sp
\fB\-T\fP, \fB\-\-ctime\fP
.RS 4
打印人类可读的时间戳。
.sp
\fBBe aware that the timestamp could be inaccurate!\fP 用于日志的 \fBtime\fP 源是 \fBnot updated after\fP 系统
\fBSUSPEND\fP/\fBRESUME\fP。时间戳根据启动时间和单调时钟之间的当前增量进行调整，这仅适用于上次恢复后打印的消息。
.RE
.sp
\fB\-\-since\fP \fItime\fP
.RS 4
显示自指定时间以来的记录。时间可以用绝对方式和相对方式指定 (例如 \(aq1 hour
ago\(aq. 请注意，时间戳可能不准确，有关详细信息，请参见 \fB\-\-ctime\fP。
.RE
.sp
\fB\-\-until\fP \fItime\fP
.RS 4
显示记录直到指定的时间。时间可以用绝对方式和相对方式指定 (例如 \(aq1 hour ago\(aq. 请注意，时间戳可能不准确，有关详细信息，请参见
\fB\-\-ctime\fP。
.RE
.sp
\fB\-t\fP, \fB\-\-notime\fP
.RS 4
不要打印内核 \(cqs 时间戳。
.RE
.sp
\fB\-\-time\-format\fP \fIformat\fP
.RS 4
使用给定的 \fIformat\fP 打印时间戳，\fIformat\fP 可以是 \fBctime\fP、\fBreltime\fP、\fBdelta\fP 或
\fBiso\fP。前三种格式是时间格式特定选项的别名。\fBiso\fP 格式是 ISO\-8601 时间戳格式的 \fBdmesg\fP
实现。这种格式的目的是使两个系统之间的时间戳比较以及任何其他解析变得容易。\fBiso\fP 时间戳的定义是:
YYYY\-MM\-DD<T>HH:MM:SS,<microseconds>\(<-+><timezone
相对于 UTC> 的偏移量。
.sp
\fBiso\fP 格式和 \fBctime\fP: 格式一样，在系统挂起和恢复时，时间可能不准确。
.RE
.sp
\fB\-u\fP, \fB\-\-userspace\fP
.RS 4
打印用户空间消息。
.RE
.sp
\fB\-w\fP, \fB\-\-follow\fP
.RS 4
等待新消息。此特性仅在具有可读 \fI/dev/kmsg\fP (自内核 3.5.0 起) 的系统上受支持。
.RE
.sp
\fB\-W\fP, \fB\-\-follow\-new\fP
.RS 4
等待并仅打印新消息。
.RE
.sp
\fB\-x\fP, \fB\-\-decode\fP
.RS 4
将设施和级别 (priority) 数字解码为人类可读的前缀。
.RE
.sp
\fB\-h\fP, \fB\-\-help\fP
.RS 4
显示帮助文本并退出。
.RE
.sp
\fB\-V\fP, \fB\-\-version\fP
.RS 4
打印版本并退出。
.RE
.SH COLORS
.sp
输出着色由 \fBterminal\-colors.d\fP(5) 功能实现。 空文件可以禁用隐式着色
.RS 3
.ll -.6i
.sp
\fI/etc/terminal\-colors.d/dmesg.disable\fP
.br
.RE
.ll
.sp
对于 \fBdmesg\fP 命令或对于所有工具
.RS 3
.ll -.6i
.sp
\fI/etc/terminal\-colors.d/disable\fP
.br
.RE
.ll
.sp
用户特定的 \fI$XDG_CONFIG_HOME/terminal\-colors.d\fP 或
\fI$HOME/.config/terminal\-colors.d\fP 覆盖全局设置。
.sp
请注意，输出着色可能默认启用，在这种情况下，\fIterminal\-colors.d\fP 目录还不必存在。
.sp
\fBdmesg\fP 支持的逻辑颜色名称是:
.sp
\fBsubsys\fP
.RS 4
消息子系统前缀 (例如，"ACPI:")。
.RE
.sp
\fBtime\fP
.RS 4
消息时间戳。
.RE
.sp
\fBtimebreak\fP
.RS 4
\fB\-\-reltime\fP 或 \fB\-\-human\fP 输出中短 ctime 格式的消息时间戳。
.RE
.sp
\fBalert\fP
.RS 4
具有警报日志优先级的消息文本。
.RE
.sp
\fBcrit\fP
.RS 4
具有关键日志优先级的消息文本。
.RE
.sp
\fBerr\fP
.RS 4
具有错误日志优先级的消息文本。
.RE
.sp
\fBwarn\fP
.RS 4
具有警告日志优先级的消息文本。
.RE
.sp
\fBsegfault\fP
.RS 4
通知有关段错误的消息文本。
.RE
.SH "EXIT STATUS"
.sp
\fBdmesg\fP 可能无法报告权限被拒绝错误。这通常是由 \fBdmesg_restrict\fP 内核设置引起的，请参见 \fBsyslog\fP(2)
了解更多详细信息。
.SH AUTHORS
.sp
.MTO kzak\(atredhat.com "Karel Zak" ""
.sp
\fBdmesg\fP 最初是由
.MTO tytso\(atathena.mit.edu "Theodore Ts\(cqo" .
.SH "SEE ALSO"
.sp
\fBterminal\-colors.d\fP(5), \fBsyslogd\fP(8)
.SH "REPORTING BUGS"
.sp
对于错误报告，请使用问题跟踪器
.URL https://github.com/util\-linux/util\-linux/issues "" .
.SH AVAILABILITY
.sp
\fBdmesg\fP 命令是 util\-linux 包的一部分，可以从
.URL https://www.kernel.org/pub/linux/utils/util\-linux/ "Linux Kernel Archive" .
.PP
.SH [手册页中文版]
.PP
本翻译为免费文档；阅读
.UR https://www.gnu.org/licenses/gpl-3.0.html
GNU 通用公共许可证第 3 版
.UE
或稍后的版权条款。因使用该翻译而造成的任何问题和损失完全由您承担。
.PP
该中文翻译由 wtklbm
.B <wtklbm@gmail.com>
根据个人学习需要制作。
.PP
项目地址:
.UR \fBhttps://github.com/wtklbm/manpages-chinese\fR
.ME 。
