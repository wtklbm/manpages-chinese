.\" -*- coding: UTF-8 -*-
'\" t
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH TIMEDATECTL 1 "" "systemd 253" timedatectl
.ie  \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH NAME
timedatectl \- 控制系统时间和日期
.SH SYNOPSIS
.HP \w'\fBtimedatectl\fR\ 'u
\fBtimedatectl\fP [OPTIONS...] {COMMAND}
.SH DESCRIPTION
.PP
\fBtimedatectl\fP 可用于查询和更改系统时钟及其设置，以及启用或禁用时间同步服务 \&。
.PP
使用 \fBsystemd\-firstboot\fP(1) 为已安装 (但未启动) 的系统映像初始化系统时区 \&。
.PP
\fBtimedatectl\fP 可用于显示时间同步服务的当前状态，例如 \fBsystemd\-timesyncd.service\fP(8)\&。
.SH COMMANDS
.PP
理解以下命令:
.PP
\fBstatus\fP
.RS 4
显示系统时钟和 RTC 的当前设置，包括网络时间同步是否处于活动状态 \&。如果未指定命令，则这是隐含的默认值 \&。
.RE
.PP
\fBshow\fP
.RS 4
显示与 \fBstatus\fP 相同的信息，但采用机器可读形式 \&。只要需要计算机可解析的输出 \&，就会使用此命令。如果您正在寻找格式化的人类可读输出
\&，请使用 \fBstatus\fP。
.sp
默认情况下，空属性被抑制 \&。也使用 \fB\-\-all\fP 来显示这些 \&。要选择要显示的特定属性，请使用 \fB\-\-property=\fP\&。
.RE
.PP
\fBset\-time [TIME]\fP
.RS 4
将系统时钟设置为指定时间 \&。这也将相应地更新 RTC 时间 \&。时间可以以 `2012\-10\-30 18:17:16`\& 的格式指定。
.RE
.PP
\fBset\-timezone [TIMEZONE]\fP
.RS 4
将系统时区设置为指定值 \&。可用时区可以用 \fBlist\-timezones\fP\& 列出。如果 RTC 配置为本地时间，这也会更新 RTC 时间
\&。此调整将更改 /etc/localtime 符号链接 \&。有关详细信息，请参见 \fBlocaltime\fP(5)\&。
.RE
.PP
\fBlist\-timezones\fP
.RS 4
列出可用的时区，每行一个 \&。列表中的条目可以使用 \fBset\-timezone\fP\& 设置为系统时区。
.RE
.PP
\fBset\-local\-rtc [BOOL]\fP
.RS 4
采用布尔型参数 \&。如果为 "0"，则系统配置为以世界时间 \& 维护 RTC。如果 "1"，它会保持本地时间的 RTC 而不是
\&。请注意，不完全支持在本地时区维护 RTC，并且会在时区更改和夏令时调整方面产生各种问题 \&。如果可能，请将 RTC 保持在 UTC 模式
\&。请注意，除非传递 \fB\-\-adjust\-system\-clock\fP (见上文) \&，否则调用此方法还将使 RTC 与系统时钟同步。此命令将更改
/etc/adjtime 的第 3 行，如 \fBhwclock\fP(8)\& 中所述。
.RE
.PP
\fBset\-ntp [BOOL]\fP
.RS 4
采用布尔型参数 \&。控制网络时间同步是否激活和启用 (如果可用) \&。如果参数为真，这将启用并启动第一个现有网络同步服务 \&。如果参数为
false，则禁用并停止已知的网络同步服务 \&。\fBsystemd\-timedated.service\fP(8)\& 中描述了构建服务列表的方式。
.RE
.SS "systemd\-timesyncd Commands"
.PP
以下命令特定于 \fBsystemd\-timesyncd.service\fP(8)\&。
.PP
\fBtimesync\-status\fP
.RS 4
显示 \fBsystemd\-timesyncd.service\fP(8)\& 的当前状态。如果指定了 \fB\-\-monitor\fP，那么这将监视状态更新 \&。
.RE
.PP
\fBshow\-timesync\fP
.RS 4
显示与 \fBtimesync\-status\fP 相同的信息，但采用机器可读形式 \&。只要需要计算机可解析的输出
\&，就会使用此命令。如果您正在寻找格式化的人类可读输出 \&，请使用 \fBtimesync\-status\fP。
.sp
默认情况下，空属性被抑制 \&。也使用 \fB\-\-all\fP 来显示这些 \&。要选择要显示的特定属性，请使用 \fB\-\-property=\fP\&。
.RE
.PP
\fBntp\-servers \fP\fIINTERFACE\fP\fB \fP\fISERVER\fP\fB\&...\fP
.RS 4
设置接口特定的 NTP 服务器 \&。该命令只有在接口由 \fBsystemd\-networkd\fP\& 管理时才能使用。
.RE
.PP
\fBrevert \fP\fIINTERFACE\fP
.RS 4
还原接口特定的 NTP 服务器 \&。该命令只有在接口由 \fBsystemd\-networkd\fP\& 管理时才能使用。
.RE
.SH OPTIONS
.PP
理解以下选项:
.PP
\fB\-\-no\-ask\-password\fP
.RS 4
不要向用户查询特权操作的身份验证 \&。
.RE
.PP
\fB\-\-adjust\-system\-clock\fP
.RS 4
如果调用 \fBset\-local\-rtc\fP 并传递此选项，系统时钟将再次从 RTC 同步，将新设置考虑在内 \&。否则，RTC 与系统时钟同步。
.RE
.PP
\fB\-\-monitor\fP
.RS 4
如果调用 \fBtimesync\-status\fP 并传递此选项，则 \fBtimedatectl\fP 会监视
\fBsystemd\-timesyncd.service\fP(8) 的状态并更新输出 \&。使用 Ctrl+C 终止监听 \&。
.RE
.PP
\fB\-a\fP, \fB\-\-all\fP
.RS 4
显示 \fBsystemd\-timesyncd.service\fP(8) 的属性时，显示所有属性，无论是否设置 \&。
.RE
.PP
\fB\-p\fP, \fB\-\-property=\fP
.RS 4
显示 \fBsystemd\-timesyncd.service\fP(8) 的属性时，将显示限制为指定为参数 \&
的某些属性。如果未指定，则显示所有设置的属性 \&。参数应该是一个属性名，例如 `ServerName`\&。如果多次指定，则显示具有指定名称的所有属性
\&。
.RE
.PP
\fB\-\-value\fP
.RS 4
用 \fBshow\-timesync\fP 打印属性时，只打印值，跳过属性名和 `=`\&。
.RE
.PP
\fB\-H\fP, \fB\-\-host=\fP
.RS 4
远程执行操作 \&。指定主机名，或用 "@" 分隔的用户名和主机名，以连接到 \&。主机名可以选择以 ssh 正在侦听的端口为后缀，由 ":"
分隔，然后是容器名称，由 "/" 分隔，它直接连接到指定主机上的特定容器 \&。这将使用 SSH 与远程机器管理器实例对话。容器名称可以用
\fBmachinectl \-H \fP\fIHOST\fP\& 枚举。将 IPv6 地址放在括号 \& 中。
.RE
.PP
\fB\-M\fP, \fB\-\-machine=\fP
.RS 4
在本地容器上执行操作 \&。指定要连接的容器名称，可以选择以要连接的用户名和分隔符 "@"\& 作为前缀。如果使用特殊字符串 "\&.host"
代替容器名称，则会建立到本地系统的连接 (这对于连接到特定用户 \* (Aqs 用户总，字符串: "\-\-user
\-\-machine=lennart@\&.host") \& 很有用。如果不使用 "@" 语法，则以 root 用户身份建立连接 \&。如果使用 "@"
语法，则可以省略左侧或右侧 (但不能同时省略两者)，在这种情况下，隐含本地用户名和 "\&.host"\&。
.RE
.PP
\fB\-h\fP, \fB\-\-help\fP
.RS 4
打印一个简短的帮助文本并退出 \&。
.RE
.PP
\fB\-\-version\fP
.RS 4
打印一个短版本字符串并退出 \&。
.RE
.PP
\fB\-\-no\-pager\fP
.RS 4
不要将输出通过管道传输到寻呼机 \&。
.RE
.SH "EXIT STATUS"
.PP
成功时返回 0，否则返回非零失败代码 \&。
.SH ENVIRONMENT
.PP
\fI$SYSTEMD_LOG_LEVEL\fP
.RS 4
发出消息的最大日志级别 (具有更高日志级别的消息，i\&.e\&。不太重要的消息将被抑制)
\&。\fBemerg\fP、\fBalert\fP、\fBcrit\fP、\fBerr\fP、\fBwarning\fP、\fBnotice\fP、\fBinfo\fP、\fBdebug\fP 之一
(按重要性递减顺序) 或 0\&...7\& 范围内的整数。有关详细信息，请参见 \fBsyslog\fP(3)\&。
.RE
.PP
\fI$SYSTEMD_LOG_COLOR\fP
.RS 4
一个布尔值 \&。如果为真，写入 tty 的消息将根据优先级着色。
.sp
这个设置只在消息直接写入终端时才有用，因为 \fBjournalctl\fP(1) 等显示日志的工具会自行根据日志级别给消息着色 \&。
.RE
.PP
\fI$SYSTEMD_LOG_TIME\fP
.RS 4
一个布尔值 \&。如果为 true，控制台日志消息将以时间戳 \& 为前缀。
.sp
这个设置只在消息直接写入终端或文件时才有用，因为 \fBjournalctl\fP(1) 等显示日志的工具会根据条目元数据自行附加时间戳 \&。
.RE
.PP
\fI$SYSTEMD_LOG_LOCATION\fP
.RS 4
一个布尔值 \&。如果为 true，消息将在源代码中以文件名和行号为前缀 \&。
.sp
请注意，日志位置通常作为元数据附加到日志条目中。尽管如此，在调试程序时将它直接包含在消息文本中还是很方便的 \&。
.RE
.PP
\fI$SYSTEMD_LOG_TID\fP
.RS 4
一个布尔值 \&。如果为真，消息将以当前数字线程 ID (TID)\& 为前缀。
.sp
请注意，此信息无论如何都作为元数据附加到日记条目 \&。尽管如此，在调试程序时将它直接包含在消息文本中还是很方便的 \&。
.RE
.PP
\fI$SYSTEMD_LOG_TARGET\fP
.RS 4
日志消息的目的地 \&。\fBconsole\fP (记录到附加的 tty)、\fBconsole\-prefixed\fP (记录到附加的
tty，但带有编码日志级别和 "facility" 的前缀，参见 \fBsyslog\fP(3)、\fBkmsg\fP
(记录到内核循环日志缓冲区)、\fBjournal\fP (记录到日志) 之一，\fBjournal\-or\-kmsg\fP (如果可用则记录到日志，否则记录到
kmsg)，\fBauto\fP (自动确定适当的日志目标，默认)，\fBnull\fP (禁用日志输出) \&。
.RE
.PP
\fI$SYSTEMD_PAGER\fP
.RS 4
未给出 \fB\-\-no\-pager\fP 时使用的寻呼机; 覆盖 \fI$PAGER\fP\&。如果 \fI$SYSTEMD_PAGER\fP 和 \fI$PAGER\fP
都没有设置，则依次尝试一组众所周知的寻呼机实现，包括 \fBless\fP(1) 和 \fBmore\fP(1)，直到找到一个
\&。如果没有发现寻呼机实现，则不调用寻呼机 \&。将此环境变量设置为空字符串或值 "cat" 等同于传递 \fB\-\-no\-pager\fP\&。
.sp
Note: 如果未设置 \fI$SYSTEMD_PAGERSECURE\fP，\fI$SYSTEMD_PAGER\fP (以及 \fI$PAGER\fP) 将被忽略
\&。
.RE
.PP
\fI$SYSTEMD_LESS\fP
.RS 4
覆盖传递给 \fBless\fP (默认 "FRSXMK") \& 的选项。
.sp
用户可能希望特别更改两个选项:
.PP
\fBK\fP
.RS 4
此选项指示寻呼机在按下 Ctrl+C 时立即退出 \&。要允许 \fBless\fP 自己处理 Ctrl+C 以切换回寻呼机命令提示符，请取消设置此选项
\&。
.sp
如果 \fI$SYSTEMD_LESS\fP 的值不包括 "K"，调用的分页器是 \fBless\fP，Ctrl+C 会被可执行文件忽略，需要分页器处理 \&。
.RE
.PP
\fBX\fP
.RS 4
此选项指示寻呼机不将 termcap 初始化和取消初始化字符串发送到终端 \&。它默认设置为允许命令输出在终端中保持可见，即使在寻呼机退出 \&
之后也是如此。然而，这会阻止某些寻呼机功能工作，特别是无法使用鼠标滚动分页输出。
.RE
.sp
有关更多讨论，请参见 \fBless\fP(1)\&。
.RE
.PP
\fI$SYSTEMD_LESSCHARSET\fP
.RS 4
覆盖传递给 \fBless\fP 的字符集 (默认为 "utf\-8"，如果调用终端被确定为与 UTF\-8 兼容) \&。
.RE
.PP
\fI$SYSTEMD_PAGERSECURE\fP
.RS 4
采用布尔型参数 \&。为真时，启用寻呼机的 "secure" 模式; 如果为假，则禁用 \&。如果根本未设置
\fI$SYSTEMD_PAGERSECURE\fP，则在有效 UID 与登录会话的所有者不同时启用安全模式，请参见 \fBgeteuid\fP(2) 和
\fBsd_pid_get_owner_uid\fP(3)\&。在安全模式下，调用寻呼机时将设置
\fBLESSSECURE=1\fP，寻呼机应禁用打开或创建新文件或启动新子进程的命令 \&。当根本没有设置 \fI$SYSTEMD_PAGERSECURE\fP
时，将不会使用未知实现安全模式的寻呼机 \&。(目前只有 \fBless\fP(1) 实现了安全模式 \&。)
.sp
Note: 当以提升的权限调用命令时，例如在 \fBsudo\fP(8) 或 \fBpkexec\fP(1) 下，必须小心确保未启用意外的交互，特性 \&。寻呼机的
"Secure" 模式可以如上所述自动启用 \&。设置 \fISYSTEMD_PAGERSECURE=0\fP 或不将其从继承环境中删除允许用户调用任意命令
\&。请注意，如果要兑现 \fI$SYSTEMD_PAGER\fP 或 \fI$PAGER\fP 变量，则必须同时设置
\fI$SYSTEMD_PAGERSECURE\fP\&。改为使用 \fB\-\-no\-pager\fP\& 完全禁用寻呼机可能是合理的。
.RE
.PP
\fI$SYSTEMD_COLORS\fP
.RS 4
采用布尔型参数 \&。当为真时，\fBsystemd\fP 和相关的实用工具将在其输出中使用颜色，否则输出将为单色 \&。此外，该变量可以采用以下特殊值之一:
"16"、"256"，分别将颜色的使用限制为基本 16 或 256 ANSI 颜色 \&。这可以被指定以覆盖基于 \fI$TERM\fP
和控制台连接到什么的自动决定 \&。
.RE
.PP
\fI$SYSTEMD_URLIFY\fP
.RS 4
该值必须是布尔值 \&。控制是否应在支持此 \& 的终端模拟器的输出中生成可点击链接。这可以被指定来覆盖 \fBsystemd\fP 基于 \fI$TERM\fP
和其他条件做出的决定 \&。
.RE
.SH EXAMPLES
.PP
显示当前设置:
.sp
.if  n \{\
.RS 4
.\}
.nf
$ timedatectl
               当地时间: 周四 2017\-09\-21 16:08:56 CEST
           世界时: 星期四 2017\-09\-21 14:08:56 UTC
                 RTC 时间: 周四 2017\-09\-21 14:08:56
                时区: Europe/Warsaw (CEST, +0200)
系统时钟同步: 是
              NTP 服务: 活动
          本地 TZ 中的 RTC: 否
.fi
.if  n \{\
.RE
.\}
.PP
启用网络时间同步:
.sp
.if  n \{\
.RS 4
.\}
.nf
$ timedatectl set\-ntp true
=== = org\&.freedesktop\&.timedate1\&.set\-ntp 认证 ===
需要鉴权控制是否启用网络时间同步 \&。
身份验证为: 用户
密码: ********
=== = 认证完成 ===
.fi
.if  n \{\
.RE
.\}
.sp

.sp
.if  n \{\
.RS 4
.\}
.nf
$ systemctl 状态 systemd\-timesyncd\&.service
● systemd\-timesyncd\&.service \- 网络时间同步
   已加载: 已加载 (/usr/systemd\-timesyncd\&.service; 已启用)
   活动: 自 Mo 2015\-03\-30 14:20:38 CEST 以来活动 (running); 5 秒前
     文档: man:systemd\-timesyncd\&.service (8)
 主 PID: 595 (systemd\-timesyn)
   状态: "Using Time Server 216\&.239\&.38\&.15:123 (time4\&.google\&.com)\&."
   C 组: /system\&.slice/systemd\-timesyncd\&.service
           └─595 /usr/lib/systemd/systemd\-timesyncd
\&...
.fi
.if  n \{\
.RE
.\}
.PP
显示 \fBsystemd\-timesyncd.service\fP(8): 的当前状态
.sp
.if  n \{\
.RS 4
.\}
.nf
$ timedatectl 时间同步状态
       服务器: 216\&.239\&.38\&.15 (time4\&.google\&.com)
轮询间隔: 1 分钟 4 秒 (最短: 32 秒; 最长 34 分钟 8 秒)
         飞跃: 正常
      版本: 4
      地层: 1
    参考: 全球定位系统
    精度: 1us (\-20)
根距: 335us (最大: 5s)
       偏移量: +316us
        延迟: 349us
       抖动: 0
 数据包数: 1
    频率: \-8\&.802ppm
.fi
.if  n \{\
.RE
.\}
.sp
.SH "SEE ALSO"
.PP
\fBsystemd\fP(1), \fBhwclock\fP(8), \fBdate\fP(1), \fBlocaltime\fP(5), \fBsystemctl\fP(1),
\fBsystemd\-timedated.service\fP(8), \fBsystemd\-timesyncd.service\fP(8),
\fBsystemd\-firstboot\fP(1)
.PP
.SH [手册页中文版]
.PP
本翻译为免费文档；阅读
.UR https://www.gnu.org/licenses/gpl-3.0.html
GNU 通用公共许可证第 3 版
.UE
或稍后的版权条款。因使用该翻译而造成的任何问题和损失完全由您承担。
.PP
该中文翻译由 wtklbm
.B <wtklbm@gmail.com>
根据个人学习需要制作。
.PP
项目地址:
.UR \fBhttps://github.com/wtklbm/manpages-chinese\fR
.ME 。
